---
# Xilinx XRT version to install
xilinx_xrt_version: '2019.2'

# Install the AWS extension to XRT
xilinx_xrt_aws: false

# Internals variables
# -------------------

# XRT packages version list
xilinx_xrt_packages:
  '2019.2': 201920.2.3.1301
  '2019.1': 201910.2.2.2250
  '2018.3': 201830.2.1.1794
  '2018.2': 201802.2.1.127

# RHEL7/Centos7 packages use a fixed distribution version as suffix
rhel7_distribution_version: 7.4.1708

# Packages filenames
prefix_deb: "xrt_{{ xilinx_xrt_packages[xilinx_xrt_version | string] }}_\
             {{ ansible_distribution_version }}-"
prefix_rpm: "xrt_{{ xilinx_xrt_packages[xilinx_xrt_version | string] }}_\
             {{ rhel7_distribution_version }}-"

xrt_deb: "{{ prefix_deb }}xrt.deb"
xrt_rpm: "{{ prefix_rpm }}xrt.rpm"
xrt_package: "{{ (ansible_os_family == 'Debian') | ternary(xrt_deb, xrt_rpm) }}"

aws_deb: "{{ prefix_deb }}aws.deb"
aws_rpm: "{{ prefix_rpm }}aws.rpm"
aws_package: "{{ (ansible_os_family == 'Debian') | ternary(aws_deb, aws_rpm) }}"

# Linux kernel version compatibles with XRT
xilinx_xrt_ensure_compatible_kernel: true

xrt_kernel_spec:
  # Kernel version is get from following values
  # - First level: "ansible_os_family"
  # - Second level on RedHat: "ansible_distribution_major_version"
  # - Second level on Debian: "ansible_distribution_release" (lower cased)
  # - Third level: "xilinx_xrt_version"
  RedHat:
    '7':
      '2019.1': 3.10.0-1062
      '2018.3': 3.10.0-957
      '2018.2': 3.10.0-957
  Debian:
    bionic:
      '2018.3': 4.18.0
      '2018.2': 4.18.0

xrt_linux_kernel_version: "{{ xilinx_xrt_version | string |
                           xrt_kernel(xrt_kernel_spec, ansible_facts)}}"
